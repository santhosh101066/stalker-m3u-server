const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["./vidstack-BeT6vBOi-DiTohZk_.js","./index-nv6x9H9a.js","./index-DGan2JZa.css"])))=>i.map(i=>d[i]);
var D=Object.defineProperty;var S=Object.getOwnPropertySymbols;var G=Object.prototype.hasOwnProperty,L=Object.prototype.propertyIsEnumerable;var I=a=>{throw TypeError(a)};var w=(a,e,t)=>e in a?D(a,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):a[e]=t,y=(a,e)=>{for(var t in e||(e={}))G.call(e,t)&&w(a,t,e[t]);if(S)for(var t of S(e))L.call(e,t)&&w(a,t,e[t]);return a};var E=(a,e,t)=>w(a,typeof e!="symbol"?e+"":e,t),v=(a,e,t)=>e.has(a)||I("Cannot "+t);var g=(a,e,t)=>(v(a,e,"read from private field"),t?t.call(a):e.get(a)),_=(a,e,t)=>e.has(a)?I("Cannot add the same private member more than once"):e instanceof WeakSet?e.add(a):e.set(a,t),P=(a,e,t,o)=>(v(a,e,"write to private field"),o?o.call(a,t):e.set(a,t),t),i=(a,e,t)=>(v(a,e,"access private method"),t);var d=(a,e,t)=>new Promise((o,s)=>{var p=n=>{try{l(t.next(n))}catch(f){s(f)}},u=n=>{try{l(t.throw(n))}catch(f){s(f)}},l=n=>n.done?o(n.value):Promise.resolve(n.value).then(p,u);l((t=t.apply(a,e)).next())});import{l as M,I as N,y as T,z as j,c as F,x as U,_ as V,j as z}from"./index-nv6x9H9a.js";function $(){return"https://www.gstatic.com/cv/js/sender/v1/cast_sender.js?loadCastFramework=1"}function J(){var a;return!!((a=window.cast)!=null&&a.framework)}function q(){var a,e;return!!((e=(a=window.chrome)==null?void 0:a.cast)!=null&&e.isAvailable)}function k(){return h().getCastState()===cast.framework.CastState.CONNECTED}function h(){return window.cast.framework.CastContext.getInstance()}function A(){return h().getCurrentSession()}function B(){var a;return(a=A())==null?void 0:a.getSessionObj().media[0]}function Y(a){var t;return((t=B())==null?void 0:t.media.contentId)===(a==null?void 0:a.src)}function H(){return{language:"en-US",autoJoinPolicy:chrome.cast.AutoJoinPolicy.ORIGIN_SCOPED,receiverApplicationId:chrome.cast.media.DEFAULT_MEDIA_RECEIVER_APP_ID,resumeSavedSession:!0,androidReceiverCompatible:!0}}function K(a){return`Google Cast Error Code: ${a}`}function Z(a,e){return M(h(),a,e)}var c,r,O,R,b,C,m;class Q{constructor(){_(this,r);E(this,"name","google-cast");E(this,"target");_(this,c)}get cast(){return h()}mediaType(){return"video"}canPlay(e){return N&&!j&&T(e)}prompt(e){return d(this,null,function*(){var p,u;let t,o,s;try{t=yield i(this,r,O).call(this,e),g(this,c)||(P(this,c,new cast.framework.RemotePlayer),new cast.framework.RemotePlayerController(g(this,c))),o=e.player.createEvent("google-cast-prompt-open",{trigger:t}),e.player.dispatchEvent(o),i(this,r,C).call(this,e,"connecting",o),yield i(this,r,R).call(this,F(e.$props.googleCast)),e.$state.remotePlaybackInfo.set({deviceName:(p=A())==null?void 0:p.getCastDevice().friendlyName}),k()&&i(this,r,C).call(this,e,"connected",o)}catch(l){const n=l instanceof Error?l:i(this,r,m).call(this,(l+"").toUpperCase(),"Prompt failed.");throw s=e.player.createEvent("google-cast-prompt-error",{detail:n,trigger:o!=null?o:t,cancelable:!0}),e.player.dispatch(s),i(this,r,C).call(this,e,k()?"connected":"disconnected",s),n}finally{e.player.dispatch("google-cast-prompt-close",{trigger:(u=s!=null?s:o)!=null?u:t})}})}load(e){return d(this,null,function*(){if(U)throw Error("[vidstack] can not load google cast provider server-side");if(!g(this,c))throw Error("[vidstack] google cast player was not initialized");return new(yield V(()=>d(this,null,function*(){const{GoogleCastProvider:t}=yield import("./vidstack-BeT6vBOi-DiTohZk_.js");return{GoogleCastProvider:t}}),__vite__mapDeps([0,1,2]),import.meta.url)).GoogleCastProvider(g(this,c),e)})}}c=new WeakMap,r=new WeakSet,O=function(e){return d(this,null,function*(){if(J())return;const t=e.player.createEvent("google-cast-load-start");e.player.dispatch(t),yield z($()),yield customElements.whenDefined("google-cast-launcher");const o=e.player.createEvent("google-cast-loaded",{trigger:t});if(e.player.dispatch(o),!q())throw i(this,r,m).call(this,"CAST_NOT_AVAILABLE","Google Cast not available on this platform.");return o})},R=function(e){return d(this,null,function*(){i(this,r,b).call(this,e);const t=yield this.cast.requestSession();if(t)throw i(this,r,m).call(this,t.toUpperCase(),K(t))})},b=function(e){var t;(t=this.cast)==null||t.setOptions(y(y({},H()),e))},C=function(e,t,o){const s={type:"google-cast",state:t};e.notify("remote-playback-change",s,o)},m=function(e,t){const o=Error(t);return o.code=e,o};var x=Object.freeze({__proto__:null,GoogleCastLoader:Q});export{h as getCastContext,K as getCastErrorMessage,A as getCastSession,B as getCastSessionMedia,Y as hasActiveCastSession,Z as listenCastContextEvent,x as loader};
