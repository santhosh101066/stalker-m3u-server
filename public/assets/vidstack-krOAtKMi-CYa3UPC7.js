var w=(n,o,t)=>new Promise((s,h)=>{var e=i=>{try{c(t.next(i))}catch(r){h(r)}},l=i=>{try{c(t.throw(i))}catch(r){h(r)}},c=i=>i.done?s(i.value):Promise.resolve(i.value).then(e,l);c((t=t.apply(n,o)).next())});const y=/(?:https:\/\/)?(?:player\.)?vimeo(?:\.com)?\/(?:video\/)?(\d+)(?:(?:\?hash=|\?h=|\/)(.*))?/,p=new Map,m=new Map;function V(n){const o=n.match(y);return{videoId:o==null?void 0:o[1],hash:o==null?void 0:o[2]}}function _(n,o,t){return w(this,null,function*(){if(p.has(n))return p.get(n);if(m.has(n))return m.get(n);let s=`https://vimeo.com/api/oembed.json?url=https://player.vimeo.com/video/${n}`;t&&(s=s.concat(`?h=${t}`));const h=window.fetch(s,{mode:"cors",signal:o.signal}).then(e=>e.json()).then(e=>{var u,f,g,b;const l=/vimeocdn.com\/video\/(.*)?_/,c=(f=(u=e==null?void 0:e.thumbnail_url)==null?void 0:u.match(l))==null?void 0:f[1],i=c?`https://i.vimeocdn.com/video/${c}_1920x1080.webp`:"",r={title:(g=e==null?void 0:e.title)!=null?g:"",duration:(b=e==null?void 0:e.duration)!=null?b:0,poster:i,pro:e.account_type!=="basic"};return p.set(n,r),r}).finally(()=>m.delete(n));return m.set(n,h),h})}export{_ as getVimeoVideoInfo,V as resolveVimeoVideoId};
